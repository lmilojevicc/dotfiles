:root {
  --link: #6fa8dc;
  --link-hover: #84b7e3;
  --link-visited: #6fa8dc;
  --heading-font: "Bitter", serif;
  --body-font: "Inter", "Karla", sans-serif;
  --interface-font: "Karla", sans-serif;
}

body,
.app-container {
  font-family: var(--interface-font) !important;
}

.markdown-source-view .cm-content {
  font-family: var(--body-font);
}

.markdown-preview-view p {
  font-family: var(--body-font);
}

/* Reading view: internal and external links */
.markdown-rendered a,
.markdown-rendered .internal-link,
.markdown-rendered .external-link {
  color: var(--link) !important;
  text-decoration-color: color-mix(in oklab, var(--link) 60%, transparent);
}

/* Reading view hover/focus/active */
.markdown-rendered a:hover,
.markdown-rendered a:focus,
.markdown-rendered a:active,
.markdown-rendered .internal-link:hover,
.markdown-rendered .external-link:hover {
  color: var(--link-hover) !important;
  text-decoration-color: color-mix(
    in oklab,
    var(--link-hover) 60%,
    transparent
  );
}

/* Prevent default visited purple */
.markdown-rendered a:visited {
  color: var(--link) !important;
}

/* Editor (CM6) – covers markdown links and wikilinks in Live Preview */
.markdown-source-view.mod-cm6 .cm-link,
.markdown-source-view.mod-cm6 .cm-url,
.markdown-source-view.mod-cm6 .cm-underline,
.markdown-source-view.mod-cm6 .cm-hmd-internal-link,
.markdown-source-view.mod-cm6 .cm-formatting-link,
.markdown-source-view.mod-cm6 .cm-formatting-link-string {
  color: var(--link) !important;
  text-decoration-color: color-mix(in oklab, var(--link) 60%, transparent);
}

/* Editor hover (when pointer is over the token) */
.markdown-source-view.mod-cm6 .cm-underline:hover,
.markdown-source-view.mod-cm6 .cm-hmd-internal-link:hover,
.markdown-source-view.mod-cm6 .cm-link:hover {
  color: var(--link-hover) !important;
  text-decoration-color: color-mix(
    in oklab,
    var(--link-hover) 60%,
    transparent
  );
}

/* Optional: keep unresolved wikilinks blue as well */
.markdown-rendered .is-unresolved,
.markdown-source-view.mod-cm6 .is-unresolved {
  color: var(--link) !important;
  opacity: 1; /* avoid dimness on some themes */
}

:root {
  --link-color: var(--link);
  --link-color-hover: var(--link-hover);
  --link-external-color: var(--link);
  --link-external-color-hover: var(--link-hover);
}

/* Reading view */
.markdown-rendered {
  color: var(--body-font);
}

/* Bold, italic, underline inherit body color (reading view) */
.markdown-rendered strong,
.markdown-rendered b,
.markdown-rendered em,
.markdown-rendered i,
.markdown-rendered u,
.markdown-rendered s,
.markdown-rendered del,
.markdown-rendered mark {
  color: inherit !important;
}

/* Ensure combined styles (e.g., bold+italic+underline) also inherit */
.markdown-rendered strong em,
.markdown-rendered em strong,
.markdown-rendered strong u,
.markdown-rendered em u,
.markdown-rendered u strong,
.markdown-rendered u em,
.markdown-rendered strong em u,
.markdown-rendered em strong u {
  color: inherit !important;
}

/* Editor (CM6 — Live Preview and Source) */
.markdown-source-view.mod-cm6 {
  color: var(--body-font);
}

/* Inline formatting tokens inherit body color in editor */
.markdown-source-view.mod-cm6 .cm-strong,
.markdown-source-view.mod-cm6 .cm-em,
.markdown-source-view.mod-cm6 .cm-underline,
.markdown-source-view.mod-cm6 .cm-strikethrough,
.markdown-source-view.mod-cm6 .cm-highlight,
.markdown-source-view.mod-cm6 .cm-formatting-strong,
.markdown-source-view.mod-cm6 .cm-formatting-em,
.markdown-source-view.mod-cm6 .cm-formatting-underline,
.markdown-source-view.mod-cm6 .cm-formatting-strikethrough {
  color: inherit !important;
}

/* Combined states in editor */
.markdown-source-view.mod-cm6 .cm-strong.cm-em,
.markdown-source-view.mod-cm6 .cm-strong.cm-underline,
.markdown-source-view.mod-cm6 .cm-em.cm-underline,
.markdown-source-view.mod-cm6 .cm-strong.cm-em.cm-underline {
  color: inherit !important;
}

/* Headings in reading and editing mode and file title */
.markdown-preview-view h1,
.markdown-preview-view h2,
.markdown-preview-view h3,
.markdown-preview-view h4,
.markdown-preview-view h5,
.markdown-preview-view h6,
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6,
.view-header-title,
.inline-title {
  font-family: var(--heading-font) !important;
}

/* Fix for bold/italic text inside blockquotes overriding color */
.markdown-preview-view blockquote strong,
.markdown-preview-view blockquote em,
.markdown-preview-view blockquote b,
.markdown-preview-view blockquote i {
  color: inherit !important;
}

@media print {
  p,
  span,
  ul,
  ol,
  li {
    font-size: 11pt !important;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    color: inherit !important;
    page-break-after: avoid;
  }

  #doctitle {
    font-family: var(--heading-font) !important;
    font-size: 24pt !important;
    font-weight: bold !important;
    line-height: 1.3;
  }

  #docsubtitle {
    font-family: var(--heading-font) !important;
    font-style: italic !important;
    font-size: 16pt !important;
    color: #444 !important;
    line-height: 1.3;
  }

  h1 {
    font-size: 16pt !important;
    font-weight: bold !important;
  }

  h2 {
    font-size: 14pt !important;
    font-weight: bold !important;
  }

  h3 {
    font-size: 14pt !important;
    font-weight: bold !important;
    color: #444 !important;
  }

  h4 {
    font-size: 12pt !important;
    font-weight: bold !important;
    color: #444 !important;
  }

  h5 {
    font-size: 12pt !important;
    font-weight: normal !important;
    color: #444 !important;
  }

  h6 {
    font-size: 12pt !important;
    font-weight: normal !important;
    font-style: italic !important;
    color: #444 !important;
  }
}
